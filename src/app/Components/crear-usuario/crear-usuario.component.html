<form id="crearUsuario" autocomplete="off" (ngSubmit)="registrarse()" [formGroup]="forma">
  <div class="row">
    <!--Email-->
    <div class="form-group col-md-6 col-12">
        <label for="disabledTextInput">E-mail*</label>
        <input type="email" 
              class="form-control" 
              placeholder="E-mail"
              formControlName="email"
              [class.is-invalid]="!valido('email')"
              >
        <small class="form-text text-danger" *ngIf="!valido('email')">Debe estar rellenado y escrito correctamente</small>
    </div>
    <!--Nombre de usuario-->
    <div class="form-group col-md-6 col-12">
      <label for="inputAddress">Nombre de usuario*</label>
      <input class="form-control"
              type="text"
              placeholder="Nombre de usuario"
              formControlName="usuario"
              [class.is-invalid]="!valido('usuario')">
        <small class="form-text text-danger" *ngIf="!valido('usuario')">Debe tener al menos 5 carácteres</small>
    </div>
    <!--Contraseñas-->
    <div class="form-group col-md-6 col-12">
      <label for="disabledSelect">Contraseña*</label>
      <input type="password" 
              class="form-control" 
              placeholder="Contraseña"
              formControlName="pass1"
              [class.is-invalid]="!valido('pass1')"
              >
      <small class="form-text text-danger" *ngIf="!valido('pass1')">Debe estar rellenado y escrito correctamente</small>
    </div>
    <div class="form-group col-md-6 col-12">
      <label for="disabledSelect">Repetir Contraseña*</label>
      <input type="password" 
            class="form-control" 
            placeholder="Contraseña"
            formControlName="pass2"
            [class.is-invalid]="!valido('pass2')"
            >
      <!--<small class="form-text text-danger" *ngIf="!valido('pass2')">Debe estar rellenado y escrito correctamente</small>-->
      <small class="form-text text-danger" *ngIf="!pass2Valido">Las contraseñas deben ser iguales</small>
    </div>
  </div>
  <!--Nombre-->
  <div class="row">
    <div class="form-group col-md-6 col-12">
      <label for="inputAddress">Nombre*</label>
      <input class="form-control"
            type="text"
            placeholder="Nombre"
            formControlName="nombre"
            [class.is-invalid]="!valido('nombre')">
        <small class="form-text text-danger" *ngIf="!valido('nombre')">Debe tener al menos 3 carácteres</small>
    </div>
    <!--Apellidos-->
    <div class="form-group col-md-6 col-12">
      <label for="inputAddress">Apellidos*</label>
      <input class="form-control"
            type="text"
            placeholder="Apellido"
            formControlName="apellido"
            [class.is-invalid]="!valido('apellido')">
        <small class="form-text text-danger" *ngIf="!valido('apellido')">Debe tener al menos 5 carácteres</small>
    </div>
  </div>
  <!--Direcciones-->
  <div class="row" formGroupName="vivienda">
    <div class="form-group col-md-6 col-12">
      <label for="inputAddress">Dirección*</label>
      <input type="text" 
              class="form-control" 
              formControlName="direccion"
              placeholder="Calle inventada, Nº XX"
              [class.is-invalid]="!valido('vivienda.direccion')">
              <small class="form-text text-danger" *ngIf="!valido('vivienda.direccion')">Debe rellenarese correctamente el campo</small>
    </div>
    <!--Ciudad-->
    <div class="form-group col-md-6 col-12">
      <label for="inputCity">Ciudad*</label>
      <input type="text" 
              class="form-control" 
              id="inputCity" 
              placeholder="Ciudad, municipio, pueblo..."
              formControlName="ciudad"
              [class.is-invalid]="!valido('vivienda.ciudad')">
      <small class="form-text text-danger" *ngIf="!valido('vivienda.ciudad') && !valido('vivienda.ciudad')">Debe completarse el campo ciudad correctamente</small>
    </div>
    <!--Localidad-->
    <div class="form-group col-md-4 col-12">
      <label for="inputState">Localidad*</label>
      <select id="inputState" 
              class="form-control"
              name="localidad"
              formControlName="localidad"
              [class.is-invalid]="!valido('vivienda.localidad')">
        <option *ngFor="let localidad of localidades.facet_groups[1].facets; let i = index" value="{{i}}" [disabled] = 'i==0'>{{localidad.name}}</option>
      </select>
      <small class="form-text text-danger" *ngIf="!valido('vivienda.localidad')">Debes seleccionar una localidad</small>
    </div>
    <!--Código postal-->
    <div class="form-group col-md-3 col-12">
      <label for="inputZip">Código postal*</label>
      <input type="text" 
              class="form-control"  
              placeholder="Código postal"
              formControlName="cod_postal"
              [class.is-invalid]="!valido('vivienda.cod_postal')">
      <small class="form-text text-danger" *ngIf="!valido('vivienda.cod_postal')">El código postal no es válido</small>
    </div>
    <!--Dirección 2º-->
    <div class="form-group col-md-5 col-12">
      <label for="inputAddress2">Dirección 2º (opcional)</label>
      <input type="text" 
              class="form-control" 
              id="inputAddress2" 
              placeholder="Calle inventada, Nº XX">
    </div>
    <!--Ciudad 2º-->
    <div class="form-group col-md-4 col-12">
      <label for="inputCity">Ciudad 2º (opcional)</label>
      <input type="text" 
              class="form-control" 
              id="inputCity" 
              placeholder="Ciudad, municipio, pueblo...">
    </div>
    <!--Localidad 2º-->
    <div class="form-group col-md-4 col-12">
      <label for="inputState">Localidad 2º (opcional)</label>
      <select id="inputState" 
              class="form-control"
              name="localidad2">
        <option *ngFor="let localidad2 of localidades.facet_groups[1].facets; let i = index" value="{{i}}" [disabled] = 'i==0'>{{localidad2.name}}</option>
      </select>
    </div>
    <!--Código postal 2º-->
    <div class="form-group col-md-4 col-12">
      <label for="inputZip">Código postal 2º (opcional)</label>
      <input type="text" 
              class="form-control"  
              placeholder="Código postal"
              formControlName="cod_postal2"
              [class.is-invalid]="!valido('vivienda.cod_postal2')">
      <small class="form-text text-danger" *ngIf="!valido('vivienda.cod_postal2')">El código postal no es válido</small>
    </div>
  </div>
  <div class="row">
    <!--Teléfono-->
    <div class="form-group col-md-6 col-12">
      <label for="inputAddress2">Teléfono (opcional)</label>
      <input type="text" 
              class="form-control" 
              formControlName="telefono"
              placeholder="Teléfono"
              [class.is-invalid]="!valido('telefono')">
      <small class="form-text text-danger" *ngIf="!valido('telefono')">El teléfono no es válido</small>
    </div>
    <!--Tarjeta de crédito-->
    <div class="form-group col-md-6 col-12">
      <label for="inputZip">Tarjeta de crédito (opcional)</label>
      <input type="text" 
              class="form-control" 
              placeholder="Tarjeta de crédito"
              formControlName="tarjeta"
              [class.is-invalid]="!valido('tarjeta')">
      <small class="form-text text-danger" *ngIf="!valido('tarjeta')">La tarjeta de credito no es válida</small>
    </div>
  </div>
  <!--Términos y condiciones-->
  <div class="form-group">
    <div class="form-check">
      <input class="form-check-input" 
              name="aceptar"
              type="checkbox" 
              (click)="aceptarCondiciones()"/>
      <label class="form-check-label" for="gridCheck">
        Confirmar los términos y condiciones.
      </label>
    </div>
  </div>
  <input type="submit" class="btn btn-outline-primary" name="enviar" value="Registrarse" [disabled]="!condicionesAceptadas"/>
</form>
